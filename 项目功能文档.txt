项目设计文档
一、 项目概述
项目名称：智能组卷系统
二、 技术栈说明
前端：Vue.js（推荐使用Vue 3，配合Vite构建工具；UI库可选Element Plus）。
后端：Python Flask（轻量级Web框架，用于提供RESTful API）。
数据库：MySQL（用于存储用户、题库、试卷、教材等所有结构化数据）。
核心AI服务：集成大模型API用于题目生成与智能校验功能。
三、 系统架构设计
前后端分离架构：
o前端Vue应用独立部署，通过HTTP请求与后端交互。
o后端Flask应用提供纯数据接口，负责业务逻辑、数据存取及AI服务集成。
o前后端通过JSON格式进行数据交换。
核心模块划分（对应您提供的功能文档）：
1. 题库管理模块
职责：负责题目的全生命周期管理，是系统的数据核心。
关键流程：
o题目入库：支持用户手动录入或通过Excel/Word模板批量上传题目。上传后解析题目文本、选项、答案、解析，并等待用户或AI为其标注难度、章节、题型。
o题目检索：为组卷模块提供高效的查询能力，能根据多重筛选条件（章节、难度、题型、知识点）组合查询题目。
o题库维护：提供题目的简单增、删、改、查界面，并记录题目的最后修改时间和状态。
2. 教材与知识点管理模块
职责：管理组卷和题目生成的依据。
关键设计：
o教材信息分为两层结构：
1.目录：仅包含章节编号和名称，用于组卷时设置章节分布。
2.章节概要：包含该章节的详细知识点、核心内容描述。这是AI生成题目时的核心参考依据。
o通过章节与知识点，与题库中的题目建立关联，形成知识网络。
3. 智能题库更新模块
职责：利用大模型扩展题库。
关键流程：
1.用户选择目标教材、章节，并设定期望的题型、难度和生成数量。
2.后端将目标章节的“章节概要”、已有的相关题目作为上下文，调用大模型API，生成新题目。
3.生成的新题目首先存入临时表，状态标记为“待校验”，不会直接进入主题库。
4. 题目双校验模块
职责：确保题目质量，是“智能更新”流程的质量关卡。
关键流程：
oAI自动校验：系统对“待校验”题目自动调用大模型API，让其审核题目的逻辑自洽性、答案正确性，并建议难度和章节分类。结果保存。
o用户手动校验：用户界面集中展示所有“待校验”题目及AI的校验建议。用户可以：
确认AI建议，一键通过。
修改题目内容或分类，然后通过。
直接拒绝不合格题目。
o只有用户确认通过的题目，才会从临时表转入主题库。
5. 智能组卷模块
职责：根据策略，从题库中自动筛选题目组成试卷。
关键设计：
o组卷策略：由用户在前端设置，是一个包含信息的JSON格式的对象
o组卷算法：根据策略，将其转化为对题库的查询条件，进行多轮随机筛选，直至满足所有分布要求。核心原则是只从现有题库中抽取，不动态生成新题。
6. 试卷编辑与导出模块
职责：处理试卷的最终呈现与输出。
关键流程：
o预览与编辑：组卷生成的题目列表，在前端渲染为可预览的试卷样式。用户可调整题目顺序、修改格式、添加页眉页脚。
o导出：后端根据编辑后的试卷数据，使用模板引擎生成Word文档，或转换为PDF文件供下载。
o历史存档：每次导出的试卷版本（包含所有编辑内容）会完整保存，便于回溯。
五、 接口设计
1. 教材管理接口
POST /api/textbooks: 上传并解析教材文件。后端将教材按章节拆分，结构化存储至数据库。
GET /api/textbooks: 获取用户的教材列表（仅元信息）。
GET /api/textbooks/<textbook_id>/chapters: 获取指定教材的完整目录（章节列表）。
2. 题库管理接口
POST /api/questions: 创建单道题目。
POST /api/questions/upload: 通过文件批量上传题目。
PUT /api/questions/<question_id>: 更新题目信息。
DELETE /api/questions/<question_id>: 删除题目。
GET /api/questions: 查询题目。支持通过textbook_id, chapter_id, type, difficulty等参数进行过滤和分页。
3. 智能题库更新与校验接口
POST /api/questions/generate: 请求AI生成题目。
说明：此接口将根据chapter_ids获取特定章节内容，而非整本教材。
GET /api/questions/pending-validation: 获取“待校验题目池”中的所有题目。
POST /api/questions/<question_id>/validate: 用户提交对题目的校验结果。
4. 智能组卷接口
POST /api/papers/compose: 执行智能组卷。
请求体：包含试卷标题title与组卷策略strategy（JSON格式）。
E5 试卷导出与历史接口
GET /api/papers/<paper_id>: 获取试卷完整内容。
PUT /api/papers/<paper_id>: 更新试卷的编辑内容（如样式调整）。
POST /api/papers/<paper_id>/export: 导出试卷。
请求体：{"format": "docx"}和{"format": "pdf"}两种
GET /api/export/history: 获取用户的试卷导出历史记录。
六、 部署方案（后续更改）
前端：可部署于Nginx平台。
后端：使用Gunicorn或uWSGI作为WSGI服务器，搭配Nginx作为反向代理。
数据库：MySQL独立服务器或云数据库服务。
